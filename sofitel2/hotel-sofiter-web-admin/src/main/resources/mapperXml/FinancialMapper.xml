<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hotel.sofiter.dao.TbFinancialMapper" >
  <resultMap id="BaseResultMap" type="com.hotel.sofiter.pojo.FinancialPo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Oct 16 19:18:30 CST 2016.
    -->
    <constructor >
      <idArg column="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="predetermineID" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="rentOutTypeID" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="roomID" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="payWayID" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="billUnitID" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="passengerTypeID" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="receiveTargetID" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="deputyID" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="isBillID" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="registerTime" jdbcType="TIMESTAMP" javaType="java.sql.Timestamp" />
      <arg column="stayNumber" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="sumConst" jdbcType="DOUBLE" javaType="java.lang.Double" />
      <arg column="changingRoomNumber" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="changRoomMoney" jdbcType="DOUBLE" javaType="java.lang.Double" />
      <arg column="remarks" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="payTime" jdbcType="TIMESTAMP" javaType="java.sql.Timestamp" />
      <arg column="changRoomTime" jdbcType="TIMESTAMP" javaType="java.sql.Timestamp" />
      <arg column="remind" jdbcType="INTEGER" javaType="java.lang.Integer" />
    </constructor>
  </resultMap>

    <select id="financialQuery" resultType="com.hotel.sofiter.pojo.FinancialPo">
      SELECT s.*,p.name AS passengerName,r.roomNumber AS RoomNumber,a.attributeDetailsName AS RoomGuestRoomLevelName,
        aa.attributeDetailsName AS predetermineReceiveTargeTypeName,ab.attributeDetailsName AS passengerTypeName
        FROM stayregister s LEFT OUTER JOIN stayregisterdetails ss ON s.id=ss.stayRegisterID
        LEFT OUTER JOIN passenger p ON ss.passengerID = p.id
        INNER JOIN room r ON s.roomID=r.id INNER JOIN attributedetails a ON r.guestRoomLevelID=a.id
        LEFT OUTER JOIN receivetarget rt ON s.receiveTargetID=rt.id
        LEFT OUTER JOIN attributedetails aa ON rt.targetTypeID= aa.id
        LEFT OUTER JOIN attributedetails ab ON s.passengerTypeID=ab.id
  </select>

</mapper>