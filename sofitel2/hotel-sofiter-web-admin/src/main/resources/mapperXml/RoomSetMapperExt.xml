<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hotel.sofiter.dao.TbRoomMapperExt" >
  <resultMap id="BaseResultMap" type="com.hotel.sofiter.pojo.RoomSetPo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Oct 16 19:18:30 CST 2016.
    -->
    <constructor >
      <idArg column="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="guestRoomLevelID" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="roomStateID" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="roomNumber" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="roomAmount" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="standardPriceDay" jdbcType="DOUBLE" javaType="java.lang.Double" />
      <arg column="standardPrice" jdbcType="DOUBLE" javaType="java.lang.Double" />
      <arg column="maxDuration" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="firstDuration" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="firstPrice" jdbcType="DOUBLE" javaType="java.lang.Double" />
    </constructor>
  </resultMap>

  <!--   新增 -->
  <insert id="insertAll" useGeneratedKeys="true" keyProperty="booksID" parameterType="com.hotel.sofiter.pojo.RoomSetPo" >
     INSERT INTO room (guestRoomLevelID,roomStateID,roomNumber,roomAmount,standardPriceDay,
                       standardPrice,maxDuration,firstDuration,firstPrice)
     values (#{guestRoomLevelID,jdbcType=INTEGER},
             #{roomStateID,jdbcType=INTEGER},
             #{roomNumber,jdbcType=VARCHAR},
             #{roomAmount,jdbcType=VARCHAR},
             #{standardPriceDay,jdbcType=DOUBLE},
             #{standardPrice,jdbcType=DOUBLE},
             #{maxDuration,jdbcType=VARCHAR},
             #{firstDuration,jdbcType=VARCHAR},
             #{firstPrice,jdbcType=DOUBLE})
  </insert>

    <!--删除-->
    <delete id="roomsDelete">
        delete from room
        where id in
        <foreach collection="roomIds" item="id" open="(" close=")" separator=",">
            #{id}
        </foreach>
    </delete>

    <!--    修改 -->
    <update id="updateById" parameterType="com.hotel.sofiter.pojo.RoomSetPo">
        UPDATE room SET guestRoomLevelID=#{guestRoomLevelID,jdbcType=INTEGER},
            roomStateID=#{roomStateID,jdbcType=INTEGER},
            roomNumber=#{roomNumber,jdbcType=VARCHAR},
            roomAmount=#{roomAmount,jdbcType=VARCHAR},
            standardPriceDay=#{standardPriceDay,jdbcType=DOUBLE},
            standardPrice=#{standardPrice,jdbcType=DOUBLE},
            maxDuration=#{maxDuration,jdbcType=VARCHAR},
            firstDuration=#{firstDuration,jdbcType=VARCHAR},
            firstPrice=#{firstPrice,jdbcType=DOUBLE}
        WHERE id = #{id,jdbcType=INTEGER}
    </update>

    <!--查询列表-->
    <select id="selectAll" resultType="com.hotel.sofiter.pojo.RoomSetPo">
        SELECT r.*,a.attributeDetailsName AS guestRoomLevelName,b.attributeDetailsName AS roomName
        FROM room r INNER JOIN attributedetails a ON r.guestRoomLevelID=a.id
        INNER JOIN attributedetails b ON r.roomStateID=b.id
    </select>

    <!--   修改要用的精确查询 -->
    <select id="selectById" resultType="com.hotel.sofiter.pojo.RoomSetPo" parameterType="java.lang.Integer">
      SELECT r.*, a.attributeDetailsName AS guestRoomLevelName,b.attributeDetailsName AS roomStateName
	FROM room r INNER JOIN attributedetails a ON r.guestRoomLevelID=a.id
	INNER JOIN attributedetails b ON r.roomStateID=b.id
	WHERE r.id=#{id,jdbcType=INTEGER}
   </select>



</mapper>